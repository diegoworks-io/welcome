---
import BlueprintBg from './BlueprintBg.astro';
import Stage2Identity from './fluid/Stage2Identity.astro';
import Stage2Panel from './fluid/Stage2Panel.astro';
---

<div id="fluid-shell" class="h-full min-h-0 flex items-center justify-center bg-black text-white relative overflow-hidden" role="region" aria-label="Fluid name container">
  <BlueprintBg />

  <!-- Stage 1: single centered line (smaller boxed container) -->
  <div class="stage1-container flex flex-col items-center justify-center">
    <div class="stage-box stage1 relative w-[90vw] max-w-[1100px] p-4 rounded-md flex flex-col items-center justify-center gap-1 bg-transparent z-10">
    <div class="hero-wrap w-full flex items-center justify-center">
      <svg role="img" aria-label="Diego González" viewBox="0 0 1000 1000" preserveAspectRatio="xMidYMid meet" class="w-full h-auto overflow-visible max-h-[36vh] md:max-h-[34vh]">
        <g>
            <text x="50%" y="50%" text-anchor="middle" dominant-baseline="middle" class="hero-text text-[clamp(64px,16vw,220px)] font-extrabold tracking-tight" fill="currentColor">Diego González</text>
          </g>
      </svg>
    </div>
      <!-- subtitle (absolute, positioned slightly below the name) -->
      <div class="subtitle absolute left-1/2 top-[64%] md:top-[62%] -translate-x-1/2 -translate-y-0 text-center text-base md:text-lg text-white/80">Product Engineer &amp; Systems Architect</div>
    </div>
  </div>

  <!-- Stage 2: two-column layout with name split into two rows, centered vertically -->
  <div class="stage-box stage2 absolute inset-0 grid place-items-stretch md:place-items-center opacity-0 pointer-events-none transition-opacity duration-300 ease-out">
    <div class="two-col w-[92vw] max-w-[1200px] h-full md:h-[60vh] box-border overflow-hidden mx-auto flex flex-col md:grid md:grid-cols-2 gap-2 md:gap-6 pt-8 md:pt-0 pb-3 md:pb-0">
      <Stage2Identity />
      <Stage2Panel />
    </div>
  </div>

  <script>
  import { initFluidName } from '../scripts/fluidName'
  initFluidName()
</script>
</div>
