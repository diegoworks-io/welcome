---
import BlueprintBg from './BlueprintBg.astro';
---

<div id="fluid-shell" class="h-full min-h-0 flex items-center justify-center bg-black text-white relative overflow-hidden" role="region" aria-label="Fluid name container">
  <BlueprintBg />

  <!-- Stage 1: single centered line (smaller boxed container) -->
  <div class="stage1-container flex flex-col items-center justify-center">
    <div class="stage-box stage1 relative w-[90vw] max-w-[1100px] p-4 rounded-md flex flex-col items-center justify-center gap-1 bg-transparent z-10">
    <div class="hero-wrap w-full flex items-center justify-center">
      <svg role="img" aria-label="Diego González" viewBox="0 0 1000 1000" preserveAspectRatio="xMidYMid meet" class="w-full h-auto overflow-visible max-h-[36vh] md:max-h-[34vh]">
        <g>
            <text x="50%" y="50%" text-anchor="middle" dominant-baseline="middle" class="hero-text text-[clamp(64px,16vw,220px)] font-extrabold tracking-tight" fill="currentColor">Diego González</text>
          </g>
      </svg>
    </div>
      <!-- subtitle (absolute, positioned slightly below the name) -->
      <div class="subtitle absolute left-1/2 top-[64%] md:top-[62%] -translate-x-1/2 -translate-y-0 text-center text-base md:text-lg text-white/80">Product Engineer &amp; Systems Architect</div>
    </div>
  </div>

  <!-- Stage 2: two-column layout with name split into two rows, centered vertically -->
  <div class="stage-box stage2 absolute inset-0 grid place-items-stretch md:place-items-center opacity-0 pointer-events-none transition-opacity duration-300 ease-out">
    <div class="two-col w-[92vw] max-w-[1200px] h-full md:h-[60vh] box-border overflow-hidden mx-auto flex flex-col md:grid md:grid-cols-2 gap-2 md:gap-6 pt-8 md:pt-0 pb-3 md:pb-0">
      <div class="left-col w-full min-h-[9.5rem] md:min-h-0 shrink-0 flex flex-col items-center md:items-start justify-start md:justify-center pr-0 md:pr-6 text-center md:text-left">
        <div class="w-full md:hidden">
          <div class="flex items-start justify-between gap-4">
            <div class="text-left">
              <div class="row font-extrabold text-[clamp(34px,10vw,56px)] leading-[0.95]">Diego</div>
              <div class="row font-extrabold text-[clamp(34px,10vw,56px)] leading-[0.95]">González</div>
              <p class="subtitle mt-1 text-[11px] leading-snug text-white/80">Product Engineer &amp; Systems Architect</p>
            </div>
            <div class="text-right">
              <p data-tijuana-time class="text-[11px] text-white/62">--:-- · same time as you</p>
              <nav class="mt-2 flex flex-col items-end gap-1 text-xs text-white/84">
                <a href="mailto:hello@diegoworks.io" class="hover:underline" aria-label="Email">Email</a>
                <a href="https://linkedin.com/in/diegoworksio" target="_blank" rel="noreferrer" class="hover:underline" aria-label="LinkedIn">LinkedIn</a>
                <a href="https://github.com/diegoworks-io" target="_blank" rel="noreferrer" class="hover:underline" aria-label="GitHub">GitHub</a>
              </nav>
            </div>
          </div>
        </div>

        <div class="hidden md:block">
          <!-- subtitle for stage 2 (above the name) -->
          <div class="subtitle text-sm text-white/80 mb-4">Product Engineer &amp; Systems Architect</div>
          <div class="name-rows flex flex-col gap-2 items-start">
            <div class="row font-extrabold text-[clamp(36px,8vw,120px)] leading-none">Diego</div>
            <div class="row font-extrabold text-[clamp(36px,8vw,120px)] leading-none">González</div>
          </div>
          <nav class="mt-8 flex flex-col gap-2 items-start text-sm text-white/84">
            <a href="mailto:hello@diegoworks.io" class="hover:underline" aria-label="Email">hello@diegoworks.io</a>
            <a href="https://linkedin.com/in/diegoworksio" target="_blank" rel="noreferrer" class="hover:underline" aria-label="LinkedIn">LinkedIn</a>
            <a href="https://github.com/diegoworks-io" target="_blank" rel="noreferrer" class="hover:underline" aria-label="GitHub">GitHub</a>
          </nav>
          <p data-tijuana-time class="mt-4 text-xs text-white/62">
            --:-- · same time as you
          </p>
        </div>
      </div>
      <div class="right-col flex-1 md:h-full min-h-0 overflow-hidden">
        <section
          class="proto-panel h-full w-full rounded-xl md:rounded-2xl bg-black/35 backdrop-blur-[1px] p-2.5 md:p-5 flex flex-col overflow-hidden"
          data-no-stage-toggle
          aria-label="Protected content layout studies"
        >
          <header class="shrink-0 border-b border-white/10 pb-2 md:pb-3">
            <nav class="layout-tabs w-full grid grid-cols-4 gap-1 md:flex md:items-center md:gap-4 md:overflow-x-auto md:whitespace-nowrap no-scrollbar" role="tablist" aria-label="Protected area navigation">
              <button type="button" data-layout-target="a" role="tab" aria-selected="true" class="layout-tab is-active">About Me</button>
              <button type="button" data-layout-target="b" role="tab" aria-selected="false" class="layout-tab">Education</button>
              <button type="button" data-layout-target="c" role="tab" aria-selected="false" class="layout-tab">Projects</button>
              <button type="button" data-layout-target="d" role="tab" aria-selected="false" class="layout-tab">Tech</button>
            </nav>
          </header>

          <div class="panel-body flex-1 min-h-0 overflow-hidden pt-2 md:pt-3">
            <article data-layout-pane="a" class="layout-pane h-full min-h-0">
              <div class="h-full h-strip p-4 md:p-5 overflow-y-auto">
                <div class="about-copy mt-3 space-y-4 text-sm leading-relaxed text-white/82">
                  <p>I spent six years leading a binational hospitality group. I remain a member of the board, where my work has shifted into crafting the custom software we use to scale. I learned that great ideas fail when the internal infrastructure is manual and the data is invisible.</p>
                  <p>I build software that allows me to see business problems from a different angle. I treat every problem as a live environment to test how structure and digital rhythm can replace reactive execution.</p>
                  <p>I am driven by the tools emerging every day that allow a single builder to create professional-grade infrastructure. These capabilities enable me to build the bridges I need to see data clearly and orchestrate complex systems on a personal scale.</p>
                </div>
              </div>
            </article>

            <article data-layout-pane="b" class="layout-pane h-full min-h-0" hidden>
              <div class="h-full h-strip p-4 md:p-5 overflow-y-auto">
                <p class="text-[11px] uppercase tracking-[0.14em] text-emerald-200/80">Education</p>
                <div class="mt-3 space-y-3 text-sm leading-relaxed text-white/82">
                  <p>B.A. in Business Administration and Management | CETYS Universidad</p>
                  <p>Foundations in Economics &amp; Industrial Design | UABC / UAS</p>
                </div>

                <p class="text-[11px] uppercase tracking-[0.14em] text-emerald-200/80 mt-6">Certifications</p>
                <div class="mt-3 space-y-3 text-sm leading-relaxed text-white/82">
                  <p>Finance for Managers | IESE Business School</p>
                  <p>Budgeting and Scheduling Projects | UC Irvine</p>
                </div>

                <p class="text-[11px] uppercase tracking-[0.14em] text-emerald-200/80 mt-6">Languages</p>
                <div class="mt-3 space-y-3 text-sm leading-relaxed text-white/82">
                  <p>Spanish | Native</p>
                  <p>English | Bilingual</p>
                </div>
              </div>
            </article>

            <article data-layout-pane="c" class="layout-pane h-full min-h-0" hidden>
              <div class="h-full min-h-0 grid grid-rows-[auto,minmax(0,1fr)] gap-3">
                <div class="h-strip p-2">
                  <div class="flex items-center gap-3">
                    <button type="button" data-project-target="konbi" class="node-card node-card--active px-2 py-1">KONBI</button>
                    <button type="button" data-project-target="boki" class="node-card px-2 py-1">BOKI</button>
                  </div>
                </div>
                <div class="h-strip h-full min-h-0 p-4 md:p-5 overflow-y-auto">
                  <div data-project-pane="konbi" class="projects-copy space-y-4 text-sm leading-relaxed text-white/82">
                    <p>A live R&amp;D environment built within a 24/7 small business. What started as an experiment in August 2025 to replace legacy spreadsheets is now a functioning ecosystem of custom end-to-end pipelines. I am a solo developer shipping features to a non-tech crew where the feedback loop is instant and the tolerance for failure is zero.</p>
                    <ul class="space-y-2 list-disc pl-5 marker:text-white/45">
                      <li><span class="text-white/90">Biometric State Machine:</span> 1-to-1 Face ID pipeline for automated attendance and payroll validation.</li>
                      <li><span class="text-white/90">Operational Telemetry:</span> Real-time dashboards for labor and procurement instrumentation.</li>
                    </ul>
                    <p>React, Tailwind CSS, Supabase, Vercel, Gemini, Codex and local models.</p>
                  </div>

                  <div data-project-pane="boki" class="projects-copy space-y-4 text-sm leading-relaxed text-white/82" hidden>
                    <p><span class="text-white/90 font-medium">Capture anything. See everything.</span> Capture what’s happening in your operations. Boki turns it into usable data.</p>
                    <p class="text-white/90 font-medium">What Boki does</p>
                    <ul class="space-y-2 list-disc pl-5 marker:text-white/45">
                      <li><span class="text-white/90">Name your counters:</span> Create your own counters, labels, and markers with a friendly UI, no spreadsheets or schemas required.</li>
                      <li><span class="text-white/90">Automatic structure:</span> Every tap becomes timestamped, structured data. Boki builds the database behind the scenes as you log.</li>
                      <li><span class="text-white/90">See patterns live:</span> Filter, sort, visualize, and compare counters in real time. Then export if you need to share.</li>
                    </ul>
                    <p class="flex flex-wrap gap-4">
                      <a href="https://bokiapp.me/" target="_blank" rel="noreferrer" class="project-link-accent">Landing page</a>
                      <a href="https://bokiapp.me/demo" target="_blank" rel="noreferrer" class="project-link-accent">Proof of concept demo</a>
                    </p>
                  </div>
                </div>
              </div>
            </article>

            <article data-layout-pane="d" class="layout-pane h-full min-h-0" hidden>
              <div class="h-full h-strip p-4 md:p-5 overflow-y-auto">
                <p class="text-[11px] uppercase tracking-[0.14em] text-emerald-200/80">Tech</p>
                <div class="about-copy mt-3 space-y-4 text-sm leading-relaxed text-white/82">
                  <p><span class="tech-label tech-label--skills font-medium">Current Skills</span><br />React, TypeScript, Astro, Tailwind CSS, Supabase, Vercel, Python, JavaScript, PLpgSQL, SQL, HTML.</p>
                  <p><span class="tech-label tech-label--ai font-medium">AI</span><br />Cloud and Local LLMs.</p>
                </div>
              </div>
            </article>
          </div>
        </section>
      </div>
    </div>
  </div>

  <script>
  import { initFluidName } from '../scripts/fluidName'
  initFluidName()
</script>
</div>

<style>
  .layout-tab {
    appearance: none;
    -webkit-appearance: none;
    border: 0;
    border-radius: 0;
    background: transparent;
    padding: 0;
    margin: 0;
    line-height: 1;
    height: 1.9rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    min-width: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: 0.75rem;
    letter-spacing: 0.02em;
    color: rgba(255, 255, 255, 0.75);
    border-bottom: 2px solid transparent;
    transition: color 180ms ease, border-color 180ms ease;
  }

  @media (hover: hover) and (pointer: fine) {
    .layout-tab:hover {
      color: rgba(255, 255, 255, 0.95);
      border-bottom-color: rgba(255, 255, 255, 0.32);
    }
  }

  .layout-tab.is-active {
    color: rgba(165, 236, 255, 0.98);
    border-bottom-color: rgba(132, 228, 255, 0.95);
  }

  .layout-tab:focus-visible {
    outline: none;
  }

  .layout-pane[hidden] {
    display: none !important;
  }

  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  .h-strip {
    border-top: 1px solid rgba(255, 255, 255, 0.16);
    border-bottom: 1px solid rgba(255, 255, 255, 0.16);
    background: rgba(255, 255, 255, 0.02);
  }

  .step-dot {
    width: 2rem;
    height: 2rem;
    border-radius: 999px;
    border: 1px solid rgba(255, 255, 255, 0.18);
    background: rgba(255, 255, 255, 0.04);
    display: grid;
    place-items: center;
    font-size: 0.7rem;
    color: rgba(255, 255, 255, 0.86);
  }

  .node-card {
    border-bottom: 1px solid rgba(255, 255, 255, 0.22);
    background: transparent;
    color: rgba(255, 255, 255, 0.78);
    font-size: 0.74rem;
    transition: border-color 160ms ease, color 160ms ease;
  }

  .node-card:hover {
    border-bottom-color: rgba(132, 228, 255, 0.68);
    color: rgba(255, 255, 255, 0.95);
  }

  .node-card--active {
    border-bottom-color: rgba(132, 228, 255, 0.98);
    color: rgba(226, 248, 255, 0.98);
  }

  .about-copy p {
    text-align: justify;
    text-justify: inter-word;
  }

  .projects-copy p {
    text-align: justify;
    text-justify: inter-word;
  }

  .projects-copy li {
    text-align: justify;
    text-justify: inter-word;
  }

  .project-link-accent {
    color: rgba(165, 236, 255, 0.98);
    text-decoration-line: underline;
    text-underline-offset: 0.25rem;
    text-decoration-color: rgba(132, 228, 255, 0.55);
    transition: color 160ms ease, text-decoration-color 160ms ease;
  }

  .project-link-accent:hover {
    color: rgba(210, 246, 255, 1);
    text-decoration-color: rgba(132, 228, 255, 0.95);
  }

  .tech-label {
    letter-spacing: 0.02em;
    margin-bottom: 0.2rem;
  }

  .tech-label--skills {
    color: rgba(145, 236, 255, 0.95);
  }

  .tech-label--ai {
    color: rgba(170, 245, 184, 0.95);
  }

  @media (max-width: 767px) {
    .layout-tab {
      height: 2.1rem;
      font-size: 0.7rem;
      letter-spacing: 0.01em;
    }
  }

  @media (min-width: 768px) {
    .layout-tab {
      width: auto;
      max-width: 7.2rem;
      min-width: 4.6rem;
      flex: 0 0 auto;
    }
  }
</style>
